$(document).ready( function() {
            $('.q').each(function() {
                $(this).css('display','none');
            });
            $('.q').each( function(index) {
                $(this).css('display','inline');
                if ( index == 0 ) //Mark first question as active
                {
                    $(this).addClass('active');
                    $('.back').addClass('disabled');
                }
                if ( index == 4 ) //Display first 5 elements
                {
                    return false;
                }
            });
    
    var total_seconds = 20; // Total time in seconds
    countdown = setInterval(function() {
        minutes = Math.ceil(total_seconds/60)-1;
        seconds = total_seconds - (minutes*60);
        if ( minutes <= 0 ) {
            minutes = 0;
            if ( seconds < 10 ) {
                $('#timezone').css('color','red');
            }
        }
        
        $('#timezone').html( minutes+ ":" + seconds);
        if ( total_seconds == 0 ) {
            clearInterval(countdown);
            $('#timezone').html("00:00");
        }
        total_seconds --;
    },1000);

            
        });
        $('#q-menu li').click( function() {
            if ( $(this).hasClass('disabled') ) //Button is disabled.
            {
                return false;
            }
            /*if ( $(this).hasClass('prev') )
            {
                alert('handler for prev called');
            }
            if ( $(this).hasClass('next') )
            {
                alert('handler for next called');
            }*/

            if ( $(this).hasClass('back') ) //Handler for Prev Question
            {
                if( $('.q.active').index('.q') == $('.q:last').index('.q') ) //Last element active
                {
                    //alert('At last element');
                    if( $('q.active').prev('.q').index('.q') == $('.q:first').index('.q') ) //Prev is First Element
                    {
                        $('q.active').removeClass('active').prev().addClass('active');
                        $(this).addClass('disabled');   //Render back button as disbaled.
                        $('.forward').removeClass('disabled');  //Render Forward button as enabled.
                    }
                    else    //Prev is not first 
                    {
                        //alert('Prev is not first');
                        $('.q.active').removeClass('active').prev('.q').addClass('active');
                        $('.forward').removeClass('disabled');  //Render Forward button as enabled.
                    }
                }
                else if ( $('.q.active').prev('.q').css('display') == 'none' ) //First element in set active
                {
                    if ( $('.q.active').prev('.q').index('.q') == $('.q:first').index('.q') ) //Prev is first element
                    {
                        //alert('prev is first element and not hidden');
                        var index_to_be_removed = $('.q.active').prev('.q').index('.q') + 5; //Set Size
                        $('.q.active').removeClass('active').prev('.q').addClass('active').css('display','inline');
                        $('.q:eq('+index_to_be_removed+')').css('display','none');
                        //$('q.active').removeClass('active').prev('.q').addClass('active');
                        $(this).addClass('disabled');
                    }
                    else    //Prev is any element
                    {
                        var index_to_be_removed = $('.q.active').prev('.q').index('.q') + 5; //Set Size
                        $('.q.active').removeClass('active').prev('.q').addClass('active').css('display','inline');
                        $('.q:eq('+index_to_be_removed+')').css('display','none');
                        //$(this).addClass('disabled');
                    }
                }
                else    //Any element other than above 
                    {
                        //alert('prev is any other element');
                        if ( $('.q.active').prev('.q').index('.q') == $('.q:first').index('.q') ) // Prev is first element
                        {
                            $('.q.active').removeClass('active').prev('.q').addClass('active');
                            $(this).addClass('disabled');
                        }
                        else
                        {
                            $('.q.active').removeClass('active').prev('.q').addClass('active');
                        }
                    }
            }

            if ( $(this).hasClass('forward') ) // Handler for Next Question
            {
                //alert($('.q.active').index('.q')+'active index left...first element right'+ $('.q:first').index('.q'));
                if( $('.q.active').index('.q') == $('.q:first').index('.q') ) //First element is active
                {
                    //alert('entered first elemtn');
                    if( $('.q.active').next().index('.q') == $('.q:last').index('.q') ) //Next is Last Element
                    {
                        //alert('entered first...next is last element');
                        $('.q.active').removeClass('active').next('.q').addClass('active');
                        $(this).addClass('disabled');   // Disable Forward button
                        $('.back').removeClass('disabled'); // Enable Back button
                    }
                    else    //Next is not last 
                    {
                        //alert('enetered first....next is not last..else');
                        $('.q.active').removeClass('active').next('.q').addClass('active');
                        $('.back').removeClass('disabled'); //Enable Back button
                        //alert($('.q.active').index('.q'));
                    }
                }
                else if ( $('.q.active').next('.q').css('display') == 'none' ) // Last element is set is active
                {
                    if ( $('.q.active').next('.q').index('.q') == $('.q:last').index('.q') ) //Next is last
                    {
                        var index_to_be_removed = $('.q.active').next('.q').index('.q') - 5; //Set Size
                        $('.q.active').removeClass('active').next().addClass('active').css('display','inline');
                        $('.q:eq('+index_to_be_removed+')').css('display','none');
                        $('.forward').addClass('disabled');
                    }
                    else //Next is any
                    {
                        var index_to_be_removed = $('.q.active').next('.q').index('.q') - 5; //Set Size
                        $('.q.active').removeClass('active').next().addClass('active').css('display','inline');
                        $('.q:eq('+index_to_be_removed+')').css('display','none');
                    }
                }
                else                                                    //Any other element is active
                {
                    //alert('Outer Else'+$('.q.active').index('.q'));
                    if ( $('.q.active').next('.q').index('.q') == $('.q:last').index('.q') ) //Next is last element
                    {
                        //alert('handler for next is last element called'+ $('.q.active').next().index('.q')+' '+$('.q:last').index('.q'));
                        $('.q.active').removeClass('active').next('.q').addClass('active');
                        //$('.q.active').css('display','inline');
                        //alert($('.q.active').index('.q'));
                        $(this).addClass('disabled');
                        //return false;
                    }
                    /*if ( $('.q.active').next('.q').css('display') == 'none' ) //Last element in set
                    {
                        //alert('Handler for last element in set called');
                        if ( $('.q.active').next('.q').index('.q') == $('.q:last').index('.q') ) //Next is last element
                        {
                            //alert ($('.q.active').next('.q').index('.q')+'.....'+$('.q:last').index('.q'));
                            $(this).addClass('disabled');
                        }
                        var index_to_be_removed = $('.q.active').next().index('.q') - 5; //Set Size
                        $('.q.active').removeClass('active').next().addClass('active').css('display','inline');
                        $('.q:eq('+index_to_be_removed+')').css('display','none');
                    }*/
                    else    //Next is any
                    {
                        //alert('handler for any other element called');
                        $('.q.active').removeClass('active').next('.q').addClass('active');
                    }
                }
            }
            if ( $(this).hasClass('q') ) // Handler for any clicked element
            {
                if ( $('.q.active').index('.q') == $(this).index('.q') ) //Clicked is the active element
                {
                    return false;
                }
                else if ( $(this).index('.q') == $('.q:first').index('.q') ) // Clicked is the first element
                {
                    if ( $('.q.active').index('.q') == $('.q:last').index('.q') ) //Active is last
                        {
                            $('.q.active').removeClass('active');
                            $('.forward').removeClass('disabled');
                            $(this).addClass('active');
                            $('.back').addClass('disabled');
                        }
                    else //Active is any element
                    {
                            $('.q.active').removeClass('active');
                            //$('.forward').removeClass('disabled');
                            $(this).addClass('active');
                            $('.back').addClass('disabled');
                    }
                }
                else if ( $(this).index('.q') == $('.q:last').index('.q') ) // Clicked is the last element
                {
                    if ( $('.q.active').index('.q') == $('.q:first').index('.q') ) //Active is first
                        {
                            $('.q.active').removeClass('active');
                            $('.back').removeClass('disabled');
                            $(this).addClass('active');
                            $('.forward').addClass('disabled');
                        }
                    else //Active is any element
                    {
                            $('.q.active').removeClass('active');
                            //$('.forward').removeClass('disabled');
                            $(this).addClass('active');
                            $('.forward').addClass('disabled');
                    }
                }
                else // Any other element than above
                {
                    if ( $('.q.active').index('.q') == $('.q:first').index('.q') ) // Active is first
                    {
                        $('.q.active').removeClass('active');
                        $('.back').removeClass('disabled');
                        $(this).addClass('active');
                    }
                    else if ( $('.q.active').index('.q') == $('.q:last').index('.q') ) // Active is last
                    {
                        $('.q.active').removeClass('active');
                        $('.forward').removeClass('disabled');
                        $(this).addClass('active');
                    }
                    else // Any other element
                    {
                        $('.q.active').removeClass('active');
                        $(this).addClass('active');
                    }
                }
            }        
        });
