<?php
session_start();
require_once('faculty_functions.php');
require_once('../db.php');
if(isset($_POST['Submit']))
  {
    if(strlen($_POST['name'])>0)
     {
      if(strlen($_POST['time_limit'])>0)
       {
         if(strlen($_POST['max_marks'])>0)
          {
           if(strlen($_POST['pass_marks'])>0)
            {
              if(strlen($_POST['marks'])>0)
                {
                  if($_POST['max_marks']>=$_POST['pass_marks'])
                   {
                    if($_POST['marks']<=$_POST['pass_marks'])
                     {
                       if($_POST['negative_marks']<=$_POST['marks'])
                        {
                         $result=create_test($connection,$_SESSION['id'],$_POST['name'],$_POST['time_limit'],$_POST['enabled'],$_POST['pass_marks'],$_POST['max_marks'],$_POST['negative_marks'],$_POST['marks']);
	                 if($result==0)
	                  {
	                   $message="Quiz Created Successfully";
	                  }
	                 else
	                  {
	                   $error="Cannot Create this Quiz";
	                  }
                        }
                       else
                        {
                         $error=$error." Negative Marks should be less than marks for each question";
                        }
                     }
                    else
                     {
                      $error=$error." Marks for each question should be less than Pass Marks.";
                     }
                   }
                  else
                   {
                    $error=$error." Pass Marks should be less than Maximum Marks.";
                   }
                 }
                else
                 {
                  $error=$error." Marks for each question cannot be null.";
                 }
               }
              else
               {
                $error=$error." Pass Marks cannot be null.";
               }
             }
            else
             {
              $error=$error." Maximum Marks cannot be null.";
             }
       }
      else
       {
        $error=$error." Attempt Time should not be null.";
       }
     }
    else
     {
      $error=$error." Name should not be null.";
     }
  }

include ('./header.php');
?>



<div id="wrapper">
<div class="form-container">
<form  autocomplete="off" enctype="multipart/form-data"  action="createtest.php" method="POST"  >
	
<?php if(isset($message)) { echo '<div  class="box green">'.$message.'</div>'; } ?>
<?php if(isset($error)) {  echo  '<div  class="box red">'.$error.'</div>';}  ?>
 
	<p class="legend"><strong>Note:</strong> Required fields are marked with an asterisk (<em>*</em>)</p>
	
	<fieldset>
		<legend>Quiz Details</legend>
			<div><label for="uname" >Name <em>*</em></label> <input id="uname" type="text" value="" name="name"   /></div>
			<div><label for="email">Attempt Time (in minutes) <em>*</em></label> <input id="email" type="text" name="time_limit"  value="" size="10"/>
			</div>
			<div>
				<label for="type">Status <em>*</em></label>
				<select id="type" name="enabled">
					<optgroup label="Enabled/Disabled">
                                            <option  value="0">Enabled</option>
						<option value="1">Disabled</option>
					</optgroup>
				</select>
			</div>
	</fieldset>
	
	<fieldset>
		<legend>Marks Detail</legend>
			<div><label for="address1">Maximum Marks <em>*</em></label> <input id="address1" type="text" value="" size="10" name="max_marks"/></div>
			<div><label for="address2">Pass Marks <em>*</em></label> <input id="address2" type="text" value="" size="10" name="pass_marks"/></div>
			<div><label for="country" >Negative Marks </label> <input id="country" type="text"  value=""  size="10" name="negative_marks"/></div>
			<div><label for="address2">Each Question <em>*</em></label> <input id="address2" type="text" value="" size="10" name="marks"/></div>
	</fieldset>
	<div class="buttonrow">
		<input type="submit" name="Submit" value="Create"  />
                <input type="reset" name="reset" value="Clear"  />
	</div>
</form> 
</div>    
</div>
<hr />
<?php include('../footer.php') ?>
</div>	
</body>
</html>